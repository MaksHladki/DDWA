<!doctype html>
<html lang="ru">

<head>
	<meta charset="utf-8">
	<title>Пакетные менеджеры и системы сборки модулей</title>
	<meta name="description" content="Пакетные менеджеры и системы сборки модулей">
	<meta name="keywords" content="npm, bower, nodejs, gulp, webpack">
	<meta name="author" content="Maks Hladki">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<link rel="stylesheet" href="../../css/bundle.min.css">
	<!--[if lt IE 9]>
		<script src="../../js/html5shiv.min.js"></script>
	<![endif]-->
</head>

<body>
	<div class="reveal">
		<div class="slides">
			<section>
				<section>
					<h1>Пакетные менеджеры и системы сборки модулей</h1>
					<h3>Разработка динамичесих веб приложений</h3>
					<p>
						<small>Гладкий Максим Валерьевич / <a href="https://github.com/MaksHladki/DDWA/">github:MaksHladki</a></small>
					</p>
				</section>
				<section>
					<h2>Содержание лекции</h2>
					<nav id="presentable-toc" class="table-content"></nav>
				</section>
			</section>
			<!-- Содержимое лекции -->
			<!-- Node JS -->
			<section>
				<h1>Node.js за 5 минут</h1>
			</section>
			<section>
				<section>
					<h2>Node.js</h2>
					<blockquote>
						Программная платформа, основанная на движке V8 (транслирует JS в машинный код), превращающая JavaScript из узкоспециализированного
						языка в язык общего назначения. Node.js добавляет возможность JavaScript взаимодействовать с устройствами ввода-вывода
						через свой API (на C++), подключать другие библиотеки, написанные на разных языках, обеспечивая вызовы к ним из JS-кода
					</blockquote>
				</section>
				<section>
					<h3>Цель проекта</h3>
					<blockquote>
						Предоставить естественную неблокирующую, событийно-ориентированную инфраструктуру для написания программ с высокой конкурентностью
						(с) Ryan Dahl
					</blockquote>
				</section>
				<section>
					<h3>Особенности</h3>
					<ul>
						<li>Использует движок Google V8 (Chromium: Google Chrome, Chrome OS...)</li>
						<li>Превращает V8 в мощную машину для серверных приложений</li>
						<li>Сохраняет философию JavaScript </li>
						<li>Event loop - неблокирующий ввод/вывод</li>
						<li>Все выполняется параллельно, кроме вашего кода </li>
					</ul>
				</section>
				<section>
					<h3>Для чего подходит Node</h3>
					<p>Много I/O </p>
					<ul>
						<li>RIA (rich internet application)</li>
						<li>API</li>
						<li>Proxy</li>
					</ul>
					<p>Realtime</p>
					<ul>
						<li>Чаты</li>
						<li>Онлайн игры</li>
						<li>Трансляции</li>
						<li>Модель Publish/Subscribe</li>
					</ul>
				</section>
				<section>
					<h3>Вспомним Event loop</h3>
					<img src="img/event-loop.png" alt="">
				</section>
				<section>
					<h3>Пример кода</h3>
					<pre>
						<code class="hljs">
// Загружаем модуль http
var http = require('http');

// Создаем web-сервер с обработчиком запросов
var server = http.createServer(function (req, res) {
    console.log('Начало обработки запроса');
    // Передаем код ответа и http-заголовки
    res.writeHead(200, {
        'Content-Type': 'text/plain; charset=UTF-8'
    });
    res.end('Hello world!');
});

// Запускаем web-сервер
server.listen(2002, "127.0.0.1", function () {
    console.log('Сервер запущен http://127.0.0.1:2002/');
});
						</code>
					</pre>
				</section>
				<section>
					<h3>C чего начать</h3>
					<p><a href="https://nodejs.org/">https://nodejs.org/</a></p>
					<ul>
						<li>LTS - расширенная поддержка</li>
						<li>Current - новый функционал</li>
					</ul>
				</section>
				<section>
					<h3>Hello world</h3>
					<pre>
						<code class="hljs">
>node -v // 7.2.1
>node --version //7.2.1
						</code>
					</pre>
					<pre>
						<code class="hljs">
>node
>console.log('Hello world');
//Hello world
						</code>
					</pre>
					<pre>
						<code class="hljs">
//создаем файл index.js
console.log('Hello World');

>node index.js
//Hello World
						</code>
					</pre>
				</section>
			</section>
			<!-- NPM -->
			<section>
				<h1>Менеджер пакетов Node (NPM)</h1>
			</section>
			<section>
				<section>
					<h2>Node Package Manager</h2>
					<ul>
						<li>Создан в 2009 года open source сообществом</li>
						<li>Цель - помочь JS-разработчикам "шарить" модули с кодом</li>
						<li>Private/Public модули</li>
						<li>Command-line клиент</li>
						<li>Используется даже теми разработчиками, кто не работает с Node.js</li>
						<li>Входит в состав пакета Node.js</li>
					</ul>
				</section>
				<section>
					<h3>Минусы NPM</h3>
					<ul>
						<li>Установка небольшого пакета может привести к скачиванию еще 5-10 пакетов, на которые ссылается данный пакет</li>
						<li>Удаление автором пакета может привести к "бездействию" программистов, зависимые пакеты нельзя будет скачать/обновить</li>
					</ul>
				</section>
				<section>
					<h3>Пакеты Node.js</h3>
					<ul>
						<li>Глобальные - {prefix}/lib/node_modules/ или %AppData%\npm\node_modules</li>
						<li>Локальные - /node_modules (в той же директории, где запущен npm install)</li>
					</ul>
					<p class="text">По умолчанию npm будет устанавливать все пакеты в локальном каталоге, в котором вы сейчас работаете</p>
				</section>
				<section>
					<h3>Команды</h3>
					<small>
					<table>
					<tr>
						<td>install</td>
						<td>установка пакета</td>
					</tr>
					<tr>
						<td>search</td>
						<td>поиск пакета</td>
					</tr>
					<tr>
						<td>view</td>
						<td>просмотр информации о пакете</td>
					</tr>
					<tr>
						<td>uninstall</td>
						<td>удаление пакета</td>
					</tr>
					<tr>
						<td>link</td>
						<td>устанавливает связь между пакетами</td>
					</tr>
					<tr>
						<td>unlink</td>
						<td>удаляет связь между пакетами</td>
					</tr>
					<tr>
						<td>init</td>
						<td>инициализация нового пакета</td>
					</tr>
					<tr>
						<td>publish</td>
						<td>публикация пакета в репозитории	</td>
					</tr>
					<tr>
						<td>unpublish</td>
						<td>удаление пакета из репозитория</td>
					</tr>
					<tr>
						<td>owner</td>
						<td>изменение прав доступа к пакету в репозитории</td>
					</tr>
					<tr>
						<td>adduser</td>
						<td>добавление нового пользователя</td>
					</tr>
					<tr>
						<td>list</td>
						<td>список установленных пакетов</td>
					</tr>
					<tr>
						<td>update</td>
						<td>обновление пакета либо самого npm</td>
					</tr>
					<tr>
						<td>config</td>
						<td>установка параметров конфигурации</td>
					</tr>
					</table>
					</small>
				</section>
				<section>
					<h3>Команда install</h3>
					<pre>
						<code class="hljs">
>npm install 'package name'
>npm install -g 'package name'	
>npm install --global 'package name'
						</code>
					</pre>
					<pre>
						<code class="hljs">
>npm install -g gulp
						</code>
					</pre>
					<pre>
						<code class="hljs">
>npm install gulp@3.9.1
						</code>
					</pre>
				</section>
				<section>
					<h3>Еще пример</h3>
					<pre>
						<code class="hljs" data-trim>
> npm install uglify-js --global
└─┬ uglify-js@2.6.2
  ├── async@0.2.10
  ├── source-map@0.5.3
  ├── uglify-to-browserify@1.0.2
  └─┬ yargs@3.10.0
    ├── camelcase@1.2.1
    ├─┬ cliui@2.1.0
    │ ├─┬ center-align@0.1.3
    │ │ ├─┬ align-text@0.1.4
    │ │ │ ├─┬ kind-of@3.0.2
    │ │ │ │ └── is-buffer@1.1.2
    │ │ │ ├── longest@1.0.1
    │ │ │ └── repeat-string@1.5.4
    │ │ └── lazy-cache@1.0.3
    │ ├── right-align@0.1.3
    │ └── wordwrap@0.0.2
    ├─┬ decamelize@1.1.2
    │ └── escape-string-regexp@1.0.5
    └── window-size@0.1.0
						</code>
					</pre>
				</section>
				<section>
					<h3>Команда search</h3>
					<pre>
						<code class="hljs">
>npm search 'package name'
//не удобно		

//лучше использовать ui интерфейс
https://www.npmjs.com/search?q=gulp
						</code>
					</pre>
				</section>
				<section>
					<h3>Команда view</h3>
					<pre>
						<code class="hljs">
>npm view 'package name'
						</code>
					</pre>
					<pre>
						<code class="hljs" data-trim>
>npm view gulp

 { name: 'gulp',
  description: 'The streaming build system',
  dist-tags: { latest: '3.9.1' },
  versions:
   [ '0.0.1',
     '0.0.2',
     ......
   ]
  author: 'Fractal (http://wearefractal.com/)',
  repository: { 
      type: 'git',
      url: 'git+https://github.com/gulpjs/gulp.git' },
  users:
   { jden: true,
     stevelacy: true,
     .....
   }
 }
						</code>
					</pre>
				</section>
				<section>
					<h3>Команда update</h3>
					<pre>
						<code class="hljs">
>npm update [-g] 'package name' //latest version
						</code>
					</pre>
					<pre>
						<code class="hljs">
>npm update -g gulp
>npm update -g npm						
						</code>
					</pre>
				</section>
				<section>
					<h3>Команда config</h3>
					<pre>
						<code class="hljs">
>npm config set 'key' 'value' [--global] 
>npm config get 'key' 
>npm config delete 'key' 
>npm config list 
>npm config edit npm c [set|get|delete|list] 
>npm get 'key' 
>npm set 'key' 'value' [--global]
						</code>
					</pre>
					<pre>
						<code class="hljs">
>npm set init.author.name "maks"
>npm set init.author.email "test@gmail.com"
>npm set init.author.url "https://google.com"
						</code>
					</pre>
				</section>
				<section>
					<h3>Команда uninstall</h3>
					<pre>
						<code class="hljs">
>npm uninstall 'package name' [@version] [--save| [--save-dev] [--global]
//--save пакет будет удален из dependencies
//--save-dev пакет будет удален из devDependencies
						</code>
					</pre>
					<pre>
						<code class="hljs">
>npm uninstall sax --save
>npm uninstall gulp --global
>npm uninstall node-tap --save-dev
>npm uninstall dtrace-provider --save-optional
						</code>
					</pre>
				</section>
				<section>
					<h3>Команда list</h3>
					<pre>
						<code class="hljs">
>npm list [--global] [--depth]
						</code>
					</pre>
					<pre>
						<code class="hljs">
>npm list -g --depth=0
//без лишних зависимостей
├── npm@3.7.5
└── uglify-js@2.6.2
						</code>
					</pre>
				</section>
			</section>
			<!-- package.json -->
			<section>
				<section>
					<h2>package.json</h2>
					<blockquote>
						Файл содержит в себе информацию о приложении: название, версию, зависимости и тому подобное. Любая директория, в которой
						есть этот файл, интерпретируется как Node.js-пакет, даже если вы не собираетесь публиковать его
					</blockquote>
				</section>
				<section>
					<h3>Основные поля</h3>
					<small>
						<table>
							<tr>
								<td>name</td>
								<td>имя пакета</td>
							</tr>
							<tr>
								<td>description</td>
								<td>описание пакета</td>
							</tr>
							<tr>
								<td>version</td>
								<td>версия пакета</td>
							</tr>
							<tr>
								<td>keywords</td>
								<td>набор ключевых слов</td>
							</tr>
							<tr>
								<td>author</td>
								<td>информация об авторе пакета</td>
							</tr>
							<tr>
								<td>main</td>
								<td>главный файл пакета</td>
							</tr>
							<tr>
								<td>license</td>
								<td>тип лицензии</td>
							</tr>
							<tr>
								<td>dependencies</td>
								<td>все пакеты, от которых зависит текущий пакет (production)</td>
							</tr>
							<tr>
								<td>devDependencies</td>
								<td>все пакеты, от которых зависит текущий пакет (development)</td>
							</tr>
							<tr>
								<td>repository</td>
								<td>тип репозитория и ссылка на него</td>
							</tr>
							<tr>
								<td>config</td>
								<td>установка параметров конфигурации</td>
							</tr>
						</table>
					</small>
				</section>
				<section>
					<h3>Пример</h3>
					<pre>
						<code class="hljs" data-trim>
{
  "name": "ddwa",
  "version": "1.0.0",
  "description": "",
  "main": "index.html",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "author": "Maksim Hladki",
  "license": "MIT",
  "devDependencies": {
    "del": "^2.2.2",
    "gulp": "^3.9.1",
    "gulp-autoprefixer": "^3.1.1",
    "gulp-clean-css": "^2.3.2",
    "gulp-concat": "^2.6.1",
    "gulp-connect": "^5.0.0",
    .........
  }
}
						</code>
					</pre>
				</section>
				<section>
					<h3>Спецификация версий пакетов</h3>
					<pre>
						<code class="hljs">
{ "dependencies" :
  { 
    "foo" : "1.0.0 - 2.9999.9999",
    "bar" : "&gt;=1.0.2 &lt;2.1.2",
    "baz" : "&gt;1.0.2 &lt;=2.3.4",
    "boo" : "2.0.1",
    "qux" : "&lt;1.0.0 || &gt;=2.3.1 &lt;2.4.5 || &gt;=2.5.2 &lt;3.0.0",
    "asd" : "http://asdf.com/asdf.tar.gz",
    "til" : "~1.2",
    "elf" : "~1.2.3",// &gt= 1.2.3 &lt 1.3.0
    "tra" : "^1.2.1",// &gt= 1.2.1 &lt 2.0.0
    "two" : "2.x",
    "thr" : "3.3.x",
    "lat" : "latest",
    "dyl" : "file:../dyl"
  }
}
						</code>
					</pre>
				</section>
			</section>
			<section>
				<section>
					<h2>NPM и VS Code</h2>
					<ul>
						<li>ext install vscode-npm (npm - Florian Knop)</li>
						<li>ext install vscode-npm-script (npm - egamma)</li>
						<li>ext install npm-intellisense (npm Intellisense - Christian Kohler)</li>
					</ul>
				</section>
				<section>
					<h3>Пример</h3>
					<img src="img/vs-code-npm.png" alt="">
				</section>
			</section>
			<!-- Bower -->
			<section>
				<h1>Менеджер пакетов Bower</h1>
			</section>
			<section>
				<section>
					<h2>Bower</h2>
					<blockquote>
						Менеджер пакетов, ориентированный на применении в разработке клиентской части веб-приложений с использованием JS библиотек
						и фреймворков
					</blockquote>
					<pre>
						<code class="hljs">
>npm install -g bower
						</code>
					</pre>
					<pre>
						<code class="hljs">
//установка пакета angular
>bower install angular

//установка пакета из репозитория
>bower install git://github.com/angular/angular.js/
						</code>
					</pre>
				</section>
				<section>
					<h3>Пример</h3>
					<pre>
						<code class="hljs">
>bower install jquery
>bower cloning git://github.com/components/jquery.git
>bower cached git://github.com/components/jquery.git
>bower fetching jquery
>bower checking out jquery#2.0.0
>bower copying /Users/danheberden/.bower/cache/jquery/29cb...
>bower installing jquery#2.0.0
						</code>
					</pre>
				</section>
				<section>
					<h3>Плюсы использования</h3>
					<ul>
						<li>Делает установку зависимостей более легкой</li>
						<li>Легкая настройка с использованием bower.json</li>
						<li>Все пакеты загружаются в единую директорию /bower_components (если зависимость уже загружена, заново она не загружается
							в отличии от npm)</li>
						<li>Механизм разрешения конфликтных ситуаций</li>
					</ul>
				</section>
			</section>
			<section>
				<section>
					<h2>Основные команды</h2>
					<table>
						<tr>
							<td>search</td>
							<td>поиск пакета по имени</td>
						</tr>
						<tr>
							<td>install</td>
							<td>установка пакета</td>
						</tr>
						<tr>
							<td>list</td>
							<td>список установленных пакетов</td>
						</tr>
						<tr>
							<td>update</td>
							<td>обновление выбранного пакета</td>
						</tr>
						<tr>
							<td>uninstall</td>
							<td>удаление пакета</td>
						</tr>
						<tr>
							<td>init</td>
							<td>инициализация конфигурационного файла bower.json</td>
						</tr>
					</table>
				</section>
				<section>
					<h3>Команда search</h3>
					<pre>
						<code class="hljs">
>bower search jquery
Search results:
    jQuery https://github.com/jquery/jquery.git
    jquery https://github.com/jquery/jquery-dist.git
    jquery.x https://github.com/jljLabs/jquery.x.git
    jt_jquery https://github.com/vicanso/jt_jquery.git
    jquery.Q https://github.com/jsbuzz/jQuery_Q.git
    jquery-m https://github.com/meetup/jquery.git
    jquery.j2d https://github.com/fsggs/jquery.j2d.git
    jquery.hx https://github.com/millennialmedia/jquery.hx.git
    jquery-ts https://github.com/andraaspar/jquery-ts.git
    jquery-tm https://github.com/trymore/jquery-tm.git
    jquery.gk https://github.com/ezoapp/jquery.gk.git
    jquery-jec https://github.com/RaYell/jquery-jec.git
	........
						</code>
					</pre>
				</section>
				<section>
					<h3>Команда install</h3>
					<pre>
						<code class="hljs">
>bower install jquery#2.0.0
//result
bower jquery#2.0.0  not-cached https://github.com/jquery/jquery-dist.git#2.0.0
bower jquery#2.0.0  resolve https://github.com/jquery/jquery-dist.git#2.0.0
bower jquery#2.0.0  download https://github.com/jquery/jquery-dist/2.0.0.tar.gz
bower jquery#2.0.0  extract archive.tar.gz
bower jquery#2.0.0  resolved https://github.com/jquery/jquery-dist.git#2.0.0
jquery#2.0.0 bower_components\jquery
						</code>
					</pre>
				</section>
				<section>
					<h3>Команда list</h3>
					<pre>
						<code class="hljs">
>bower list
//result
bower check-new  Checking for new versions of the project dependencies...
HP C:\Users\HP
└── jquery#3.1.1 extraneous
						</code>
					</pre>
				</section>
				<section>
					<h3>Команда uninstall</h3>
					<pre>
						<code class="hljs">
>bower uninstall jquery
						</code>
					</pre>
				</section>
				<section>
					<h3>Команда init</h3>
					<pre>
						<code class="hljs" data-trim>
>bower init
//bower.json
{
  name: 'Maks Hladki',
  authors: [
    'Maks Hladki &ltMaksHladki@gmail.com&gt'
  ],
  description: 'test project',
  main: 'index.html',
  keywords: [
    'js',
    'frontend'
  ],
  license: 'MIT',
  homepage: 'https://github.com/MaksHladki/DDWA'.
  dependencies: {
        "jquery": "~3.1.1",
  },
  devDependencies: {}
}
						</code>
					</pre>
				</section>
			</section>
			<section>
				<h2>Bower и VS Code</h2>
				<p>ext install bower (Bower - Don Jayamanne)</p>
				<img src="img/vs-code-bower.png" alt="">
			</section>
			<!-- Cистема сборки и задач -->
			<section>
				<h1>Cистема сборки и выполнения задач</h1>
			</section>
			<section>
				<h2>Процесс front-end разработки</h2>
				<table>
					<thead>
						<tr>
							<th>Develop</th>
							<th>Build</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td>Watch</td>
							<td>Testing</td>
						</tr>
						<tr>
							<td>Live Reload</td>
							<td>Compile</td>
						</tr>
						<tr>
							<td>ES6/TypeSctipt/Coffee</td>
							<td>Concat</td>
						</tr>
						<tr>
							<td>Sass/Less</td>
							<td>Rename</td>
						</tr>
						<tr>
							<td>JsHint</td>
							<td>Minify</td>
						</tr>
						<tr>
							<td></td>
							<td>Image optimization</td>
						</tr>
						<tr>
							<td></td>
							<td>Deployment</td>
						</tr>
					</tbody>
				</table>
			</section>
			<section>
				<h2>Популярные системы сборки</h2>
				<ul>
					<li>Grunt</li>
					<li>Gulp</li>
					<li>Webpack</li>
					<li>Browserify</li>
				</ul>
			</section>
			<section>
				<section>
					<h2>Gulp vs Grunt</h2>
					<img src="img/gulp-grunt.png" alt="">
				</section>
				<section>
					<h3>Сходства</h3>
					<ul>
						<li>Минификация кода</li>
						<li>Анализ качества кода</li>
						<li>Оптимизация изображений</li>
						<li>Добавление вендорных (браузерных) префиксов</li>
						<li>Тестирование</li>
						<li>Многое другое</li>
					</ul>
				</section>
				<section>
					<h3>Различия</h3>
					<small>
					<table>
						<thead>
							<tr>
								<th>Gulp</th>
								<th>Grunt</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>ориентирован на поток</td>
								<td>ориентирован на файл</td>
							</tr>
							<tr>
								<td>запускает задачи параллельно</td>
								<td>запускает задачи последовательно</td>
							</tr>
							<tr>
								<td>синтаксис более краток и лаконичен</td>
								<td>основан на конфигурации</td>
							</tr>
							<tr>
								<td>проектировался для больших проектов</td>
								<td>проектировался для средних и небольших проектов</td>
							</tr>
							<tr>
								<td>скорость выполнения выше</td>
								<td></td>
							</tr>
						</tbody>
					</table>
					</small>
				</section>
			</section>
			<section>
				<h1>Gulp</h1>
			</section>
			<section>
				<section>
					<h2>Структура проекта</h2>
					<pre>
						<code class="hljs">
├── app/
      ├── css/
      ├── fonts/
      ├── images/ 
      ├── index.html
      ├── js/ 
      └── scss/
├── dist/
├── gulpfile.js
├── node_modules/
└── package.json
						</code>
					</pre>
				</section>
				<section>
					<h3>Еще пример</h3>
					<pre>
						<code class="hljs" data-trim>
├── .tmp
│   ├── app.css
│   ├── app.js
│   └── index.html
├── bower_components
│   └── angular
├── dist
│   ├── app.min.css
│   ├── app.min.js
│   └── index.html
├── src
    ├── app.scss
    ├── app.ts
    ├── components
    └── index.html
├── gulpfile.js
├── node_modules/
└── package.json
						</code>
					</pre>
				</section>
			</section>
			<section>
				<section>
					<h2>Подробнее о преимуществах</h2>
					<ul>
						<li>Легок в использовании</li>
						<li>Эффективен</li>
						<li>Высокая надежность</li>
						<li>Прост в изучении</li>
					</ul>
				</section>
				<section>
					<h3>Легок в использовании</h3>
					<blockquote>
						Предпочитая код конфигурации, Gulp оставляет простые задачи простыми, а из сложных делает управляемые
					</blockquote>
					<pre>
						<code class="hljs">
const gulp = require('gulp'),
      coffee = require('gulp-coffee'),
      concat = require('gulp-concat'),
      cssmin = require('gulp-cssmin');

gulp.task('coffee', () => {
    //TODO
});
						</code>
					</pre>
				</section>
				<section>
					<h3>Эффективен</h3>
					<blockquote>
						Используя преимущества потока данных, процесс выполнения задач получается более быстрым, промежуточные файлы не создаются
						и на диск не записываются (Vinul FS)
					</blockquote>
					<img src="img/gulp-flow.png" alt="">
				</section>
				<section>
					<h3>Пример</h3>
					<pre>
						<code class="hljs">
gulp.task('html', () => {
    return gulp.src(srcPath.html)// Считываем файл с диска
        .pipe(useref()) //Обрабатываем в оперативной памяти
        .pipe(gulpif('*.js', uglify())) //Обрабатываем в ОП
        .pipe(gulpif('*.css',
            pipe(
                autoprefixer({
                    browsers: ['last 2 versions']
                }),
                cssmin()
            )
        ))// Обрабатываем в оперативной памяти
        .pipe(gulp.dest(distPath.html))// Записываем файл на диск
        .pipe(connect.reload());
});
						</code>
					</pre>
				</section>
				<section>
					<h3>Высокая надежность</h3>
					<blockquote>
						Все плагины для Gulp пишутся по специальным правилам. Этот процесс позволяет задачам оставаться простыми и работать так,
						как этого ожидает разработчик
					</blockquote>
					<p>Общее количество плагинов на декабрь 2016: <span class="highlight-blue">1100+</span></p>
				</section>
				<section>
					<h3>Прост в изучении</h3>
					<blockquote>
						Можно начать работать с Gulp с минимальными знаниями API. Нужно всего лишь понимать принцип работы основных четырех функций:
						<span class="highlight-blue">task</span>, <span class="highlight-blue">watch</span>, <span class="highlight-blue">src</span>						и <span class="highlight-blue">dest</span>
					</blockquote>
				</section>
			</section>
			<section>
				<section>
					<h2>Установка и запуск Gulp</h2>
					<ol>
						<li>Создать package.json</li>
						<li>Установить Gulp глобально</li>
						<li>Установить Gulp локально как зависимость</li>
						<li>Создать gulpfile.js</li>
						<li>Выполнить команду gulp</li>
					</ol>
					<pre>
						<code class="hljs">
>npm install --global gulp

>npm install --save-dev gulp
						</code>
					</pre>
				</section>
				<section>
					<h3>Пример gulpfile.js</h3>
					<pre>
						<code class="hljs">
var gulp  = require('gulp');

gulp.task('default', function() {
    console.log('Gulp is running!');
});
						</code>
					</pre>
					<pre>
						<code class="hljs">
>gulp

[16:20:01] Using gulpfile G:\test\gulpfile.js
[16:20:01] Starting 'default'...
Gulp is running!
[16:20:01] Finished 'default' after 200 µs
						</code>
					</pre>
				</section>
				<section>
					<h3>Еще пример</h3>
					<pre>
						<code class="hljs">
>gulp default
//если имя задачи не установлено, вызывается задача с именем default
[16:21:17] Using gulpfile G:\test\gulpfile.js
[16:21:17] Starting 'default'...
Gulp is running!
[16:21:17] Finished 'default' after 181 µs
						</code>
					</pre>
				</section>
			</section>
			<section>
				<section>
					<h2>Основные методы Gulp</h2>
				</section>
				<section>
					<h3>Метод task</h3>
					<pre>
						<code class="hljs">
gulp.task(name[, deps], fn)
//name - required
//deps - массив зависимых зависимостей
//fn - callback вызова
						</code>
					</pre>
					<pre>
						<code class="hljs">
gulp.task('hello', function() {
   console.log('Hello world!'); 
}); 

gulp.task('css', ['greet'], function () {
   //TODO
}); 

gulp.task('build', ['css', 'js', 'imgs']); 

gulp.task('default', function () { 
   //TODO default task
});
						</code>
					</pre>
				</section>
				<section>
					<h3>Метод watch</h3>
					<pre>
						<code class="hljs">
gulp.watch(glob[, opts, fn])
//globs - строка или массив
//options - доп. параметры или callback
						</code>
					</pre>
					<pre>
						<code class="hljs">
gulp.watch('js/**/*.js', function(event) {
  console.log('File ' + event.path + ' type ' + event.type);
});
						</code>
					</pre>
					<pre>
						<code class="hljs">
gulp.task('watch', function(){
    gulp.watch('app/scss/**/*.scss', ['sass']); 
	gulp.watch('app/css/**/*.css', ['css']); 
	gulp.watch('app/js/**/*.js', ['js']); 
    // Other watchers
});
						</code>
					</pre>
				</section>
				<section>
					<h3>Метод src</h3>
					<pre>
						<code class="hljs">
gulp.src(globs[, options])
//globs - строка или массив
//options - доп. параметры
//возвращает входной поток
						</code>
					</pre>
					<pre>
						<code class="hljs">
gulp.src('./*.jade')
gulp.src('*.+(js|css)')
gulp.src('*.{jpg,jpeg,png,gif}')
gulp.src(['js/**/*.js', '!js/**/*.min.js'])
						</code>
					</pre>
				</section>
				<section>
					<h3>Метод dest</h3>
					<pre>
						<code class="hljs">
gulp.dest(path, [,options])
//принимает путь к файлу и возвращает исходящий поток
						</code>
					</pre>
					<pre>
						<code class="hljs">
gulp.task('css', () => {
    return gulp.src(srcPath.css)
	 	.on('data', (file) => {
            console.log({
				path:file.path,
				basename: file.basename
			});
        })
        .pipe(sourcemaps.init())
        .pipe(autoprefixer(autoprefixerSettings))
        .pipe(cleanCSS(cleanCSSSettings))
        .pipe(sourcemaps.write())
        .pipe(gulp.dest(distPath.css));
});
						</code>
					</pre>
				</section>
				<section>
					<h3>Метод pipe</h3>
					<pre>
						<code class="hljs">
.pipe(destination)
//возвращает поток
//destination - тоже поток
						</code>
					</pre>
					<pre>
						<code class="hljs">
gulp.src('./client/templates/*.jade')
    .pipe(jade())
    .pipe(gulp.dest('./app'))
    .pipe(minify())
    .pipe(gulp.dest('./dist'));
						</code>
					</pre>
				</section>
			</section>
			<!-- Пакеты Gulp -->
			<section>
				<section>
					<h2>browser-sync</h2>
				</section>
				<section>
					<h3>Пример 1</h3>
					<pre>
						<code class="hljs">
>npm install browser-sync gulp --save-dev
						</code>
					</pre>
					<pre>
						<code class="hljs" data-trim>
const gulp = require('gulp'),
      browserSync = require('browser-sync').create();
gulp.task('html', () => {
    return gulp.src('src/**/*.html').pipe(gulp.dest('dist/'));
});
gulp.task('css', () => {
    return gulp.src("src/css/*.css")
        .pipe(gulp.dest("dist/css"))
        .pipe(browserSync.stream());//*
});
gulp.task('serve', ['html' ,'css'], () => {
    browserSync.init({ server: "./dist" });
});
gulp.task('watch', () => {
  gulp.watch('src/css/*.css', ['css']);
  gulp.watch('src/**/*.html', ['html'])
      .on('change', browserSync.reload);//*
});
gulp.task('default', ['serve', 'watch']);
						</code>
					</pre>
				</section>
				<section>
					<h3>Пример 2</h3>
					<pre>
						<code class="hljs">
gulp.task('serve', () => {
    browserSync.init({
        server: distPath.dist,
        port: 4000
    });

    browserSync.watch(distPath.dist).on('change', browserSync.reload);
});
						</code>
					</pre>
				</section>
				<section>
					<h3>Метод reload</h3>
					<pre>
						<code class="hljs">
browserSync.reload();

browserSync.reload("styles.css");

browserSync.reload(["styles.css", "ie.css"]);

browserSync.reload("*.css");
						</code>
					</pre>
				</section>
				<section>
					<h3>Метод stream</h3>
					<pre>
						<code class="hljs">
//возвращает трансформированный поток данных, 
//автоматически вставляемых в браузер

gulp.task('sass', function () {
    return gulp.src('scss/styles.scss')
        .pipe(sass({includePaths: ['scss']}))
        .pipe(gulp.dest('css'))
        .pipe(browserSync.stream());
        //автоматически вставляет трансформированный поток в браузер
});
						</code>
					</pre>
					<pre>
						<code class="hljs">
.pipe(browserSync.stream({once: true}));
// перегружает только один раз для потока данных 
//(исходных файлов может быть несколько)
						</code>
					</pre>
					<pre>
						<code class="hljs">
.pipe(browserSync.stream({match: "**/*.css"}));
//фильтр обновления только определенных файлов
						</code>
					</pre>
				</section>
				<section>
					<h3>Метод exit</h3>
					<pre>
						<code class="hljs">
var browserSync = require("browser-sync").create();

// запускаем сервер
browserSync.init({server: "./app"});

// останавливаем сервер через 5 секунд
setTimeout(function () {
    browserSync.exit();
}, 5000);
						</code>
					</pre>
				</section>
				<section>
					<h3>Метод init</h3>
					<pre>
						<code class="hljs">
browserSync.init({
    server: "./dist",
    port: 8000,
    index: 'index.html',
    //proxy: "localhost:8888",
    browser: ["firefox"]
});
						</code>
					</pre>
				</section>
			</section>
			<section>
				<section>
					<h2>gulp-connect</h2>
				</section>
				<section>
					<h3>Пример</h3>
					<pre>
						<code class="hljs">
>npm install --save-dev gulp-connect
						</code>
					</pre>
					<pre>
						<code class="hljs" data-trim>
const gulp = require('gulp'),
    connect = require('gulp-connect');

gulp.task('html', () => {
    return gulp.src('src/**/*.html')
        .pipe(gulp.dest('dist/'))
        .pipe(connect.reload()); //*
})

gulp.task('serve', ['html'], () => {
    connect.server({
        root: 'dist', livereload: true //*
    });
});

gulp.task('watch', () => {
    gulp.watch('src/**/*.html', ['html']);
});

gulp.task('default', ['serve', 'watch']);
						</code>
					</pre>
				</section>
				<section>
					<h3>Запуск и остановка</h3>
					<pre>
						<code class="hljs">
gulp.task('something', function() {
  connect.server({
    port: 8888
  });
  
  //BODY

  connect.serverClose();
});
						</code>
					</pre>
				</section>
				<section>
					<h3>Параметры инициализации</h3>
					<pre>
						<code class="hljs">
gulp.task('serve', ['html'], () => {
    connect.server({
        name: 'Test application',
        root: ['dist', 'tmp'],
        port: 8000,
        livereload: true,
        index: 'index.html'
    });
});
						</code>
					</pre>
				</section>
			</section>
			<section>
				<section>
					<h2>gulp-autoprefixer</h2>
				</section>
				<section>
					<h3>Пример 1</h3>
					<pre>
						<code class="hljs">
>npm install --save-dev gulp-autoprefixer
						</code>
					</pre>
					<pre>
						<code class="hljs">
const gulp = require('gulp'),
      autoprefixer = require('gulp-autoprefixer');
 
gulp.task('css', () =>
    gulp.src('src/app.css')
        .pipe(autoprefixer({
            browsers: ['last 2 versions']
        }))
        .pipe(gulp.dest('dist/css/'))
);
						</code>
					</pre>
					<pre>
						<code class="hljs" data-trim>
a {
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex
}
						</code>
					</pre>
				</section>
				<section>
					<h3>Пример 2</h3>
					<pre>
						<code class="hljs">
const gulp = require('gulp'),
      sourcemaps = require('gulp-sourcemaps'),
      autoprefixer = require('gulp-autoprefixer'),
      concat = require('gulp-concat');
 
gulp.task('css', () =>
    gulp.src('src/**/*.css')
        .pipe(sourcemaps.init())
        .pipe(autoprefixer())
        .pipe(concat('all.css'))
        .pipe(sourcemaps.write('.'))
        .pipe(gulp.dest('dist/css/'))
);
						</code>
					</pre>
				</section>
				<section>
					<h3>Параметры инициализации</h3>
					<pre>
						<code class="hljs">
autoprefixer(
	{
        browsers: ['last 2 versions', 'ie 9', '> 1%'],
        cascade: true, //визуальный каскад, если css не сжат
        supports: false,//добавлять префикс к @supports параметрам,
        stats: { //собственная статистика
                 "ie": {
                         "6": 0.01,
                         "7": 0.4,
                         "8": 1.5
                       },
                 "chrome": {
                      …
                           },
                      …
                } 
    }
)					
						</code>
					</pre>
				</section>
				<section>
					<h3>Browsers list</h3>
					<table>
						<tr>
							<td>
								<ul>
									<li>last 2 versions</li>
									<li>last 2 Chrome versions</li>
									<li>&gt 5%</li>
									<li>&gt 5% in US</li>
									<li>ie 6-8</li>
								</ul>
							</td>
							<td>
								<ul>
									<li>ie 10</li>
									<li>Firefox >= 20</li>
									<li>iOS 7</li>
									<li>not ie
										<=8 </li>
								</ul>
							</td>
						</tr>
					</table>
				</section>
				<section>
					<h3>Браузеры</h3>
					<table>
						<tr>
							<td>
								<ul>
									<li>Chrome</li>
									<li>Firefox (ff)</li>
									<li>Explorer (ie)</li>
									<li>Edge</li>
									<li>iOS</li>
									<li>Opera</li>
									<li>Safari (ios_saf)</li>
									<li>ExplorerMobile</li>
								</ul>
							</td>
							<td>
								<ul>
									<li>Android</li>
									<li>BlackBerry (bb)</li>
									<li>ChromeAndroid</li>
									<li>FirefoxAndroid</li>
									<li>OperaMobile</li>
									<li>OperaMini</li>
									<li>Samsung</li>
								</ul>
							</td>
						</tr>
					</table>
				</section>
			</section>
			<section>
				<section>
					<h2>gulp-clean-css</h2>
				</section>
				<section>
					<h3>Пример 1</h3>
					<pre>
						<code class="hljs">
>npm install gulp-clean-css --save-dev
						</code>
					</pre>
					<pre>
						<code class="hljs">
const gulp = require('gulp'),
      cleanCSS = require('gulp-clean-css');

gulp.task('css', () => {
  return gulp.src('app/styles/*.css')
    .pipe(cleanCSS({compatibility: 'ie8'}))//ie8, * или '' для ie9+
    .pipe(gulp.dest('dist/'));
});
						</code>
					</pre>
				</section>
				<section>
					<h3>Пример 2</h3>
					<pre>
						<code class="hljs">
const gulp = require('gulp'),
      cleanCSS = require('gulp-clean-css');

gulp.task('css', function() {
    return gulp.src('app/styles/*.css')
        .pipe(cleanCSS({debug: true}, (details) => {
            console.log(details.name + ': ' + details.stats.originalSize);
            console.log(details.name + ': ' + details.stats.minifiedSize);
        }))
        .pipe(gulp.dest('dist/css/'));
});
						</code>
					</pre>
				</section>
				<section>
					<h3>Пример 3</h3>
					<pre>
						<code class="hljs">
const gulp = require('gulp'),
      cleanCSS = require('gulp-clean-css'),
	  sourcemaps = require('gulp-sourcemaps');

gulp.task('css', function() {
    return gulp.src('app/styles/*.css')
        .pipe(sourcemaps.init())
        .pipe(cleanCSS())
        .pipe(sourcemaps.write())
        .pipe(gulp.dest('dist/css/'));
    });
});
						</code>
					</pre>
				</section>
			</section>
			<section>
				<section>
					<h2>gulp-sass</h2>
				</section>
				<section>
					<h3>Пример 1</h3>
					<pre>
						<code class="hljs">
>npm install gulp-sass --save-dev
						</code>
					</pre>
					<pre>
						<code class="hljs">
const gulp = require('gulp'),
      sass = require('gulp-sass');
 
gulp.task('sass', () => {
  return gulp.src('./sass/**/*.scss')
    .pipe(sass().on('error', sass.logError))
    .pipe(gulp.dest('./css'));
});
 
gulp.task('watch', () => {
  gulp.watch('./sass/**/*.scss', ['sass']);
});
						</code>
					</pre>
				</section>
				<section>
					<h3>Пример 2</h3>
					<pre>
						<code class="hljs">
const gulp = require('gulp'),
      sass = require('gulp-sass');
 
gulp.task('sass', () => {
  return gulp.src('./sass/**/*.scss')
    .pipe(sass.sync().on('error', sass.logError))
	//выполняется синхронно
    .pipe(gulp.dest('./css'));
});
 
gulp.task('watch', () => {
  gulp.watch('./sass/**/*.scss', ['sass']);
});
						</code>
					</pre>
				</section>
				<section>
					<h3>Пример 3</h3>
					<pre>
						<code class="hljs">
const gulp = require('gulp'),
      sass = require('gulp-sass'),
      sourcemaps = require('gulp-sourcemaps');
 
gulp.task('sass', function () {
 return gulp.src('./sass/**/*.scss')
  .pipe(sourcemaps.init())
  .pipe(sass().on('error', sass.logError))
  .pipe(sourcemaps.write())
  .pipe(gulp.dest('./css'));
});
						</code>
					</pre>
				</section>
			</section>
			<section>
				<section>
					<h2>gulp-less</h2>
				</section>
				<section>
					<h3>Пример 1</h3>
					<pre>
						<code class="hljs">
>npm install gulp-less --save-dev
						</code>
					</pre>
					<pre>
						<code class="hljs">
const gulp = require('gulp'),
      less = require('gulp-less');

gulp.task('less', () => {
    return gulp.src('./less/**/*.less')
               .pipe(less())
               .pipe(gulp.dest('./public/css'));
});
						</code>
					</pre>
				</section>
				<section>
					<h3>Пример 2</h3>
					<pre>
						<code class="hljs">
const gulp = require('gulp'),
      less = require('gulp-less'),
      LessAutoprefix = require('less-plugin-autoprefix');

const autoprefix = new LessAutoprefix({ browsers: ['last 2 versions'] });

gulp.task('less', () => {
    return gulp.src('./less/**/*.less')
               .pipe(less({
                   plugins: [autoprefix]
               }))
               .pipe(gulp.dest('./public/css'));
});
						</code>
					</pre>
				</section>
				<section>
					<h3>Пример 3</h3>
					<pre>
						<code class="hljs">
const gulp = require('gulp'),
      less = require('gulp-less'),
      sourcemaps = require('gulp-sourcemaps');

gulp.task('less', () => {
return gulp.src('./less/**/*.less')
  .pipe(sourcemaps.init())
  .pipe(less())
  .pipe(sourcemaps.write())
  .pipe(gulp.dest('./public/css'));
});
						</code>
					</pre>
				</section>
			</section>
			<section>
				<section>
					<h2>gulp-concat</h2>
				</section>
				<section>
					<h3>Пример 1</h3>
					<pre>
						<code class="hljs">
>npm install --save-dev gulp-concat
						</code>
					</pre>
					<pre>
						<code class="hljs">
const gulp = require('gulp'),
      concat = require('gulp-concat');
 
gulp.task('scripts', () => {
  return gulp.src('src/js/*.js')
    .pipe(concat('bundle.js'))
    .pipe(gulp.dest('dist/js/'));
});
						</code>
					</pre>
				</section>
				<section>
					<h3>Пример 2</h3>
					<pre>
						<code class="hljs">
const gulp = require('gulp'),
      concat = require('gulp-concat'),
	  sourcemaps = require('gulp-sourcemaps');
 
gulp.task('css', () => {
  return gulp.src('src/**/*.css')
    .pipe(sourcemaps.init())
    .pipe(concat('bundle.css'))
    .pipe(sourcemaps.write())
    .pipe(gulp.dest('dist/'));
});
						</code>
					</pre>
				</section>
			</section>
			<section>
				<section>
					<h2>gulp-imagemin</h2>
				</section>
				<section>
					<h3>Пример 1</h3>
					<pre>
						<code class="hljs">
>npm install --save-dev gulp-imagemin
						</code>
					</pre>
					<pre>
						<code class="hljs">
const gulp = require('gulp'),
      imagemin = require('gulp-imagemin');
 
gulp.task('img', () =>
    gulp.src('src/img/*')
        .pipe(imagemin())
        .pipe(gulp.dest('dist/img/'))
);
						</code>
					</pre>
				</section>
				<section>
					<h3>Пример 2</h3>
					<pre>
						<code class="hljs">
const gulp = require('gulp'),
      imagemin = require('gulp-imagemin');
 
gulp.task('img', () =>
    gulp.src('src/img/*')
        .pipe(imagemin(
           [ imagemin.gifsicle(), 
		     imagemin.jpegtran(), 
		     imagemin.optipng(), 
		     imagemin.svgo()
		   ],
           { verbose: true})
        )
        .pipe(gulp.dest('dist/img/'))
);

[10:43:01] gulp-imagemin: ✔ vs-code-bower.png (saved 2.97 kB - 11.1%)
[10:43:01] gulp-imagemin: ✔ window.png (saved 11.6 kB - 13.3%)
						</code>
					</pre>
				</section>
				<section>
					<h3>Используемые пакеты по умолчанию</h3>
					<ul>
						<li>gifsicle — оптимизация GIF</li>
						<li>jpegtran — оптимизация JPEG</li>
						<li>optipng — оптимизация PNG</li>
						<li>svgo — оптимизация SVG</li>
					</ul>
				</section>
				<section>
					<h3>Дополнительные пакеты</h3>
					<table>
						<tr>
							<td>
								<ul>
									<li>imagemin-pngquant</li>
									<li>imagemin-giflossy</li>
									<li>imagemin-jpeg-recompress</li>
									<li>imagemin-gm</li>
								</ul>
							</td>
							<td>
								<ul>
									<li>imagemin-mozjpeg</li>
									<li>imagemin-webp</li>
									<li>imagemin-pngout</li>
									<li>imagemin-zopfli</li>
								</ul>
							</td>
						</tr>
					</table>
				</section>
			</section>
			<section>
				<section>
					<h2>gulp-rename</h2>
				</section>
				<section>
					<h3>Пример 1</h3>
					<pre>
						<code class="hljs">
>npm install gulp-rename --save-dev
						</code>
					</pre>
					<pre>
						<code class="hljs">
const gulp = require('gulp'),
      rename = require("gulp-rename");

gulp.task('rename', () => {
    return gulp.src('./src/css/main.css')
                .pipe(rename('css/bundle.css'))
                .pipe(gulp.dest('./dist')); 
});
						</code>
					</pre>
				</section>
				<section>
					<h3>Пример 2</h3>
					<pre>
						<code class="hljs">
const gulp = require('gulp'),
      rename = require("gulp-rename");

gulp.task('rename', () => {
    return gulp.src('./src/css/main.css')
               .pipe(rename(function (path) {
                     path.dirname += '/base';
                     path.basename += '-bundle';
                     path.extname = '.css'
                }))
               .pipe(gulp.dest('./dist')); 
               //dist/css/base/ciao/main-bundle.css
});
						</code>
					</pre>
				</section>
				<section>
					<h3>Пример 3</h3>
					<pre>
						<code class="hljs">
const gulp = require('gulp'),
      rename = require("gulp-rename");

gulp.task('rename', () => {
    return gulp.src("./src/css/main.css")
               .pipe(rename(
                   {
                      dirname: "main/",
                      basename: "main",
                      prefix: "style-",
                      suffix: ".min",
                      extname: ".css"
                   }
               ))
               .pipe(gulp.dest("./dist"));
               //dist/css/main/style-main.min.css
});
						</code>
					</pre>
				</section>
			</section>
			<section>
				<section>
					<h2>gulp-babel</h2>
				</section>
				<section>
					<h3>Пример 1</h3>
					<p><a href="https://babeljs.io/">https://babeljs.io/</a></p>
					<pre>
						<code class="hljs">
>npm install --save-dev gulp-babel
>npm install --save-dev babel-preset-es2015 //*
						</code>
					</pre>
					<pre>
						<code class="hljs">
const gulp = require('gulp'),
      babel = require('gulp-babel');

gulp.task('default', () =>
    gulp.src('src/app.js')
        .pipe(babel({
            presets: ['es2015']
        }))
        .pipe(gulp.dest('dist'))
);
						</code>
					</pre>
				</section>
				<section>
					<h3>Пример 2</h3>
					<pre>
						<code class="hljs">
const gulp = require('gulp'),
      sourcemaps = require('gulp-sourcemaps'),
      babel = require('gulp-babel'),
      concat = require('gulp-concat');

gulp.task('default', () =>
    gulp.src('src/**/*.js')
        .pipe(sourcemaps.init())
        .pipe(babel({
            presets: ['es2015']
        }))
        .pipe(concat('all.js'))
        .pipe(sourcemaps.write())
        .pipe(gulp.dest('dist'))
);
						</code>
					</pre>
				</section>
				<section>
					<h3>Пример 3</h3>
					<pre>
						<code class="hljs">
>npm install --save-dev babel-plugin-transform-runtime
						</code>
					</pre>
					<pre>
						<code class="hljs">
const gulp = require('gulp'),
      babel = require('gulp-babel');

gulp.task('default', () =>
    gulp.src('src/app.js')
        .pipe(babel({
            plugins: ['transform-runtime']
        }))
        .pipe(gulp.dest('dist'))
);
						</code>
					</pre>
				</section>
			</section>
			<section>
				<section>
					<h2>gulp-uglify (ES5)</h2>
				</section>
				<section>
					<h3>Пример 1</h3>
					<pre>
						<code class="hljs">
>npm install --save-dev gulp-uglify
						</code>
					</pre>
					<pre>
						<code class="hljs">
const gulp = require('gulp'),
      uglify = require('gulp-uglify');

gulp.task('compress', () => {
  return gulp.src('lib/*.js')
             .pipe(uglify())
             .pipe(gulp.dest('dist/'))
});
						</code>
					</pre>
				</section>
				<section>
					<h3>Пример 2</h3>
					<pre>
						<code class="hljs" data-trim>
const gulp = require('gulp'),
      uglify = require('gulp-uglify');

gulp.task('compress', () => {
  return gulp.src('lib/*.js')
             .pipe(uglify({
                mangle: false,
                output: {
                   beautify: true,
                   comments: true
                },
                compress: {
                   drop_debugger : false,
                   warnings : false,
                   loops : true
                }
             }))
             .pipe(gulp.dest('dist/'))
});
						</code>
					</pre>
				</section>
				<section>
					<h3>Параметры output</h3>
					<pre>
						<code class="hljs">	
indent_start : 0,    //start indentation on every line
indent_level : 4,    //indentation level
quote_keys   : false,//quote all keys in object literals?
space_colon  : true, //add a space after colon signs?
ascii_only   : false,//output ASCII-safe?
inline_script: false,//escape "&lt/script"?
width        : 80,   //informative maximum line width
max_line_len : 32000,//maximum line length
ie_proof     : true, //output IE-safe code?
beautify     : false,//beautify output?
source_map   : null, //output a source map
bracketize   : false,//use brackets every time?
comments     : false,//output comments?
semicolons   : true, //use semicolons to separate statements?
						</code>
					</pre>
				</section>
				<section>
					<h3>Параметры compressor</h3>
					<pre>
						<code class="hljs" data-trim>
sequences    : true, //join consecutive statemets with “comma operator”
properties   : true, //optimize property access: a["foo"] → a.foo
dead_code    : true, //discard unreachable code
drop_debugger: true, //discard “debugger” statements
unsafe       : false,//some unsafe optimizations (see below)
conditionals : true, //optimize if-s and conditional expressions
comparisons  : true, //optimize comparisons
evaluate     : true, //evaluate constant expressions
booleans     : true, //optimize boolean expressions
loops        : true, //optimize loops
unused       : true, //drop unused variables/functions
hoist_funs   : true, //hoist function declarations
hoist_vars   : false,//hoist variable declarations
if_return    : true, //optimize if-s followed by return/continue
join_vars    : true, //join var declarations
cascade      : true, //try to cascade `right` into `left` in sequences
side_effects : true, //drop side-effect-free statements
warnings     : true, //warn about potentially dangerous optimizations
global_defs  : {}    //global definitions
						</code>
					</pre>
				</section>
			</section>
			<section>
				<section>
					<h2>del</h2>
				</section>
				<section>
					<h3>Пример 1</h3>
					<pre>
						<code class="hljs">
>npm install --save del
						</code>
					</pre>
					<pre>
						<code class="hljs">
const gulp = require('gulp'),
      del = require('del');

gulp.task('clean', () => {
    return del([distPath.dist]);
});
						</code>
					</pre>
				</section>
				<section>
					<h3>Пример 2</h3>
					<pre>
						<code class="hljs">
const gulp = require('gulp'),
      del = require('del');

gulp.task('clean', () => {
    return del(['dist/css/', 'dist/js/**/*.min.js']).then(paths => {
        console.log('Deleted files and folders:\n', paths.join('\n'));
    });
});
						</code>
					</pre>
				</section>
			</section>
			<section>
				<section>
					<h2>gulp-if</h2>
				</section>
				<section>
					<h3>Принцип работы</h3>
					<img src="img/gulp-if.svg" alt="">
				</section>
				<section>
					<h3>Пример 1</h3>
					<pre>
						<code class="hljs">
>npm install gulp-if --save-dev
						</code>
					</pre>
					<pre>
						<code class="hljs">
const gulp = require('gulp'),
      gulpif = require('gulp-if'),
	  uglify = require('gulp-uglify');
 
var condition = true; 
// условие, может быть функция, паттерн и т.д

gulp.task('task', function() {
  gulp.src('./src/*.js')
    .pipe(gulpif(condition, uglify()))
    .pipe(gulp.dest('./dist/'));
});
						</code>
					</pre>
				</section>
				<section>
					<h3>Пример 2</h3>
					<pre>
						<code class="hljs" data-trim>
const gulp = require('gulp'),
      gulpIgnore = require('gulp-ignore'),
      gulpif = require('gulp-if'),
      autoprefixer = require('gulp-autoprefixer'),
      cleanCSS = require('gulp-clean-css'),
	  uglify = require('gulp-uglify');

gulp.task('html', () => {
    return gulp.src('src/**/*.*')
        .pipe(gulpif('*.js', uglify()))
        .pipe(gulpif('*.css',
            pipe(
                autoprefixer(autoprefixerSettings),
                cleanCSS(cleanCSSSettings)
            )
        ))
        .pipe(gulp.dest('dist/'));
});
						</code>
					</pre>
				</section>
			</section>
			<section>
				<section>
					<h2>gulp-useref</h2>
				</section>
				<section>
					<h3>Пример 1</h3>
					<pre>
						<code class="hljs">
>npm install --save-dev gulp-useref
						</code>
					</pre>
					<pre>
						<code class="hljs">
const gulp = require('gulp'),
      useref = require('gulp-useref');
 
gulp.task('html', function () {
    return gulp.src('src/**/*.html')
        .pipe(useref())
        .pipe(gulp.dest('dist'));
});
						</code>
					</pre>
				</section>
				<section>
					<h3>Пример 2</h3>
					<pre>
						<code class="hljs">
const gulp = require('gulp'),
      useref = require('gulp-useref'),
      gulpif = require('gulp-if'),
      uglify = require('gulp-uglify'),
      cleanCSS = require('gulp-clean-css');
 
gulp.task('html', function () {
    return gulp.src('src/*.html')
        .pipe(useref())
        .pipe(gulpif('*.js', uglify()))
        .pipe(gulpif('*.css', cleanCSS()))
        .pipe(gulp.dest('dist'));
});
						</code>
					</pre>
				</section>
				<section>
					<h3>Изменения в html</h3>
					<pre>
						<code class="hljs">
<!-- build:<type>(alternate search path) <path> <parameters> -->
...список js или css файлов
<!-- endbuild -->
						</code>
					</pre>
					<pre>
						<code class="hljs">
&lt;!-- build:css css/bundle.min.css --&gt;
    &lt;link rel="stylesheet" href="css/reveal.css"&gt;
    &lt;link rel="stylesheet" href="css/reveal.font.css"&gt;
    &lt;link rel="stylesheet" href="css/reveal.theme.css"&gt;
    &lt;link rel="stylesheet" href="css/font-awesome.css"&gt;
&lt;!-- endbuild --&gt;
						</code>
					</pre>
				</section>
			</section>
			<section>
				<section>
					<h2>gulp-sequence</h2>
				</section>
				<section>
					<h3>Пример 1</h3>
					<pre>
						<code class="hljs">
>npm install --save-dev gulp-sequence
						</code>
					</pre>
					<pre>
						<code class="hljs" data-trim>
const gulp = require('gulp'),
      gulpSequence = require('gulp-sequence');
 
gulp.task('a', () => { /* callback code */ });
gulp.task('b', () => { /* callback code */ });
gulp.task('c', () => { /* callback code */ });
gulp.task('d', () => { /* callback code */ });
gulp.task('e', () => { /* callback code */ });
 
gulp.task('sequence-1', gulpSequence(['a', 'b'], 'c', ['d', 'e']));
 
gulp.task('sequence-2', (cb) => {
  gulpSequence('a', ['b', 'c', 'd'], 'e', cb);
});
 
gulp.task('sequence-3', (cb) => {
  gulpSequence(['a', 'b', 'e'], 'd', 'c')(cb);
});
						</code>
					</pre>
				</section>
				<section>
					<h3>Пример 2</h3>
					<pre>
						<code class="hljs">
gulp.task('build', gulpSequence('clean', [
    'html',
    'img',
    'js',
    'css'
]));
						</code>
					</pre>
					<pre>
						<code class="hljs">
gulp.task('default', gulpSequence('build', ['watch', 'connect']));
						</code>
					</pre>
				</section>
			</section>
			<section>
				<section>
					<h2>gulp-watch</h2>
				</section>
				<section>
					<h3>Пример 1</h3>
					<pre>
						<code class="hljs">
>npm install --save-dev gulp-watch
						</code>
					</pre>
					<pre>
						<code class="hljs">
const gulp = require('gulp'),
      watch = require('gulp-watch');

gulp.task('stream', () => {
    return watch('css/**/*.css', { ignoreInitial: false })//*
	//ignoreInitial event add/add folder будут вызваны
        .pipe(gulp.dest('build'));
});

gulp.task('callback', () => {
    return watch('css/**/*.css', () => {//*
        gulp.src('css/**/*.css')
            .pipe(gulp.dest('build'));
    });
});
						</code>
					</pre>
				</section>
				<section>
					<h3>Пример 2</h3>
					<pre>
						<code class="hljs">
gulp.task('watch', () => {
    watch(srcPath.css, () => gulp.start('css'));
    watch(srcPath.html, () => gulp.start('html'));
    watch(srcPath.js, () => gulp.start('js'));
    watch(srcPath.img, () => gulp.start('img'));
    watch(srcPath.font, () => gulp.start('font'));
    watch(srcPath.task, () => gulp.start('task'));
});							
						</code>
					</pre>
				</section>
			</section>
			<section>
				<section>
					<h2>gulp-jshint</h2>
				</section>
				<section>
					<h3>Пример 1</h3>
					<pre>
						<code class="hljs">
>npm install jshint gulp-jshint --save-dev
						</code>
					</pre>
					<pre>
							<code class="hljs">
const gulp = require('gulp'),
      jshint = require('gulp-jshint');
 
gulp.task('js:hint', function () {
   return gulp.src('./src/js/**/*.js')
    .pipe(jshint())
    .pipe(jshint.reporter());
});
src\js\classList.min.js: line 2, col 95, Missing "use strict" statement.
src\js\classList.min.js: line 2, col 1499, Unnecessary semicolon.
src\js\classList.min.js: line 2, col 389, 'DOMException' is not defined.
src\js\classList.min.js: line 2, col 1492, 'self' is not defined.
							</code>
						</pre>
				</section>
				<section>
					<h3>Пример 2</h3>
					<pre>
							<code class="hljs">
const gulp = require('gulp'),
      jshint = require('gulp-jshint');

gulp.task('js:lint', () => {
    return gulp.src('./src/**/*.js')
        .pipe(jshint())
        .pipe(jshint.reporter('jslint_xml'));
});
[22:00:39] Using gulpfile C:\Projects\DDWA\gulpfile.js
[22:00:39] Starting 'js:lint'...
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;checkstyle version="4.3"&gt;
        &lt;file name="src\js\classList.min.js"&gt;
                &lt;error line="2" 
                          column="95" 
                          severity="error" 
                          message="Missing &amp;quot;use strict&amp;quot; statement." 
                          source="jshint.E007" /&gt;
							</code>
						</pre>
				</section>
				<section>
					<h3>Пример 3</h3>
					<pre>
							<code class="hljs">
const gulp = require('gulp'),
      jshint = require('gulp-jshint');

gulp.task('js:hint', () => {
    return gulp.src('./src/**/*.js')
        .pipe(jshint())
        .pipe(jshint.reporter('checkstyle'))
        .pipe(jshint.reporter('fail'));//*
});
							</code>
						</pre>
				</section>
				<section>
					<h3>Пример 4</h3>
					<pre>
						<code class="hljs">
const gulp = require('gulp'),
      jshint = require('gulp-jshint'),
	  jshintReporter = require('gulp-jshint-html-reporter');

gulp.task('js:hint', () => {
    return gulp.src('./src/**/*.js')
        .pipe(jshint('.jshintrc'))//*
        .pipe(jshint.reporter(jshintReporter, {//*
            filename: './src/code-analysis/js/jshint-output.html',
            createMissingFolders : true
        }));
});						
						</code>
					</pre>
				</section>
				<section>
					<h3>Файл .jshintrc</h3>
					<p><a href="http://jshint.com/docs/options/">Описание параметров</a></p>
					<pre>
						<code class="hljs" data-trim>
{
    "bitwise": true,
    "camelcase": true,
    "curly": true,
    "eqeqeq": true,
    "es3": false,
    "forin": true,
    "freeze": true,
    "immed": true,
    "indent": 4,
    "latedef": "nofunc",
    "newcap": true,
    "noarg": true,
    "noempty": true,
    "nonbsp": true,
    "nonew": true,
    "plusplus": false,
    "quotmark": "single",
    "undef": true,
    "unused": false,
    "strict": false,
    "maxparams": 10,
    "maxdepth": 5,
    "maxstatements": 40,
    "maxcomplexity": 8,
    "maxlen": 120,

    "asi": false,
    "boss": false,
    "debug": false,
    "eqnull": true,
    "esnext": false,
    "evil": false,
    "expr": false,
    "funcscope": false,
    "globalstrict": false,
    "iterator": false,
    "lastsemic": false,
    "laxbreak": false,
    "laxcomma": false,
    "loopfunc": true,
    "maxerr": false,
    "moz": false,
    "multistr": false,
    "notypeof": false,
    "proto": false,
    "scripturl": false,
    "shadow": false,
    "sub": true,
    "supernew": false,
    "validthis": false,
    "noyield": false,

    "browser": true,
    "node": true,

    "globals": {
        "angular": false,
        "$": false
    }
}
						</code>
					</pre>
				</section>
			</section>
			<section>
				<section>
					<h2>gulp-csslint</h2>
				</section>
				<section>
					<h3>Пример 1</h3>
					<pre>
						<code class="hljs">
>npm install --save-dev gulp-csslint
						</code>
					</pre>
					<pre>
							<code class="hljs">
const gulp = require('gulp'),
      csslint = require('gulp-csslint');
	  			
gulp.task('css:lint', () => {
    return gulp.src('./src/**/*.css')
        .pipe(csslint())
        .pipe(csslint.formatter());
});

[22:12:31] Using gulpfile C:\Projects\DDWA\gulpfile.js
[22:12:33] Starting 'css:lint'...
csslint: There are 15 problems in C:\Projects\DDWA\src\css\font-awesome.css.
font-awesome.css
1: warning at line 7, col 1
Rule doesn't have all its properties in alphabetical order.
							</code>
						</pre>
				</section>
				<section>
					<h3>Пример 2</h3>
					<pre>
							<code class="hljs">	
const gulp = require('gulp'),
      csslint = require('gulp-csslint');

gulp.task('css:lint', () => {
    return gulp.src('./src/**/*.css')
        .pipe(csslint())
        .pipe(csslint.formatter('junit-xml'));
});								
							</code>
						</pre>
				</section>
				<section>
					<h3>Пример 3</h3>
					<pre>
							<code class="hljs">
const gulp = require('gulp'),
      csslint = require('gulp-csslint');

gulp.task('css:lint', () => {
    return gulp.src('./src/**/*.css')
        .pipe(csslint())
        .pipe(csslint.formatter());
        .pipe(csslint.formatter('fail'));
});
							</code>
						</pre>
				</section>
			</section>
			<section>
				<section>
					<h2>gulp-util</h2>
				</section>
				<section>
					<h3>Пример 1</h3>
					<pre>
						<code class="hljs">
>npm install gulp-util --save-dev
						</code>
					</pre>
					<pre>
						<code class="hljs">
const gutil = require('gulp-util');

gutil.log('something happened', 'in js:hint', gutil.colors.magenta('123'));

gutil.replaceExtension('file.coffee', '.js'); // file.js

var opt = {
  name: 'todd',
  file:   {
        path: 'hi.js'
      }
};
gutil.template('test <%= name %> <%= file.path %>', opt) // test todd hi.js
						</code>
					</pre>
				</section>
				<section>
					<h3>Пример 2</h3>
					<pre>
						<code class="hljs">
const gutil = require('gulp-util');

var err = new gutil.PluginError('test', {
  message: 'something broke'
});

var err = new gutil.PluginError({
  plugin: 'test',
  message: 'something broke'
});

var err = new gutil.PluginError('test', 'something broke');
var err = new gutil.PluginError('test', 'something broke', {showStack: true});

var existingError = new Error('Error');
var err = new gutil.PluginError('test', existingError, {showStack: true});
						</code>
					</pre>
				</section>
				<section>
					<h3>Пример 3</h3>
					<pre>
						<code class="hljs">
const gutil = require('gulp-util');

gulp.task('scripts', function() {
  gulp.src('./src/**/*.js')
    .pipe(concat('script.js'))
    .pipe(gutil.env.type === 'production' ? uglify() : gutil.noop())//*
    .pipe(gulp.dest('dist/'));
});
						</code>
					</pre>
				</section>
			</section>
			<section>
				<h2>Большой пример</h2>
				<pre>
					<code class="hljs" data-trim>
//modules

const gulp = require('gulp'),
    gulpif = require('gulp-if'),
    gulpSequence = require('gulp-sequence'),
    autoprefixer = require('gulp-autoprefixer'),
    browserSync = require('browser-sync'),
    concat = require('gulp-concat'),
    cleanCSS = require('gulp-clean-css'),
    csslint = require('gulp-csslint'),
    csslintReporter = require('gulp-csslint-report'),
    del = require('del'),
    imagemin = require('gulp-imagemin'),
    newer = require('gulp-newer'),
    rename = require('gulp-rename'),
    pipe = require('multipipe'),
    sourcemaps = require('gulp-sourcemaps'),
    jshint = require('gulp-jshint'),
    jshintReporter = require('gulp-jshint-html-reporter'),
    uglify = require('gulp-uglify'),
    useref = require('gulp-useref'),
    watch = require('gulp-watch');

//variables

const srcPath = {
    'src': './src',
    'html': './src/**/*.html',
    'img': './src/**/*.+(jpg|png|svg)',
    'css': ['./src/!(css|js)*/**/*.css'],
    'cssLint': './src/**/*.css',
    'js': './src/!(js)*/**/*.js',
    'jsLint': ['./src/**/*.js', '!./src/**/*.min.js'],
    'font': './src/font/**/*.*',
    'task': './src/task/**/*.pdf',
    'analysis': './src/code-analysis/',
};

const distPath = {
    'dist': './dist/',
    'html': './dist/',
    'img': './dist/',
    'css': './dist/css/',
    'js': './dist/',
    'font': './dist/font/',
    'task': './dist/task/'
};

const pluginSettings = {
    autoprefixer: {
        browsers: ['last 2 versions', 'ie 9', 'ie 10']
    },
    cleanCSS: {
        compatibility: '*'
    },
    csslint: {
        filename: 'index.html',
        directory: srcPath.analysis + '/css/'
    },
    jshint: {
        filename: srcPath.analysis + '/js/index.html',
        createMissingFolders: true
    }
};

//tasks

gulp.task('clean', () => {
    return del([srcPath.analysis, distPath.dist]);
});

gulp.task('html', () => {
    return gulp.src(srcPath.html)
        .pipe(useref({}, pipe(sourcemaps.init)))
        .pipe(gulpif('*.js', pipe(
            uglify()
        )))
        .pipe(gulpif('*.css',
            pipe(
                autoprefixer(pluginSettings.autoprefixer),
                cleanCSS(pluginSettings.cleanCSS)
            )
        ))
        .pipe(sourcemaps.write())
        .pipe(gulp.dest(distPath.html));
});

gulp.task('css', () => {
    return gulp.src(srcPath.css)
        .pipe(sourcemaps.init())
        .pipe(autoprefixer(pluginSettings.autoprefixer))
        .pipe(cleanCSS(pluginSettings.cleanCSS))
        .pipe(sourcemaps.write())
        .pipe(gulp.dest(distPath.css));
});

gulp.task('css:lint', () => {
    return gulp.src(srcPath.cssLint)
        .pipe(csslint('.csslintrc'))
        .pipe(csslintReporter(pluginSettings.csslint));
});

gulp.task('js', () => {
    return gulp.src(srcPath.js)
        .pipe(gulp.dest(distPath.js));
});

gulp.task('js:lint', () => {
    return gulp.src(srcPath.jsLint)
        .pipe(jshint('.jshintrc'))
        .pipe(jshint.reporter(jshintReporter, pluginSettings.jshint));
});

gulp.task('img', () => {
    return gulp.src(srcPath.img)
        .pipe(newer(distPath.img))
        .pipe(imagemin())
        .pipe(gulp.dest(distPath.img));
});

gulp.task('font', () => {
    return gulp.src(srcPath.font)
        .pipe(gulp.dest(distPath.font));
});

gulp.task('task', () => {
    return gulp.src(srcPath.task)
        .pipe(gulp.dest(distPath.task));
})

gulp.task('serve', () => {
    browserSync.init({
        server: distPath.dist,
        port: 4000
    });

    browserSync.watch(distPath.dist).on('change', browserSync.reload);
});

gulp.task('build', gulpSequence('clean', ['js:lint', 'css:lint'], [
    'html',
    'img',
    'js',
    'css',
    'font',
    'task'
]));

gulp.task('watch', () => {
    watch(srcPath.css, () => gulp.start('css'));
    watch(srcPath.html, () => gulp.start('html'));
    watch(srcPath.js, () => gulp.start('js'));
    watch(srcPath.img, () => gulp.start('img'));
    watch(srcPath.font, () => gulp.start('font'));
    watch(srcPath.task, () => gulp.start('task'));
});

gulp.task('default', gulpSequence('build', ['watch', 'serve']));
					</code>
				</pre>
			</section>
			<!-- Webpack -->
			<section>
				<h1>Webpack</h1>
			</section>
			<section data-transition="slide" data-background="#b5533c">
				<h2>Как работает webpack</h2>
				<img src="img/webpack.png" alt="" height="500">
			</section>
			<section>
				<h2>Webpack vs Gulp</h2>
				<img src="img/webpack-gulp.png" alt="">
			</section>
			<section>
				<h2>Плюсы</h2>
				<ul>
					<li>Всеобщая система сборки</li>
					<li>Может быть интегрирован с Grunt или Gulp</li>
					<li>Предоставляет динамическую подгрузку</li>
					<li>Использует Chunk для общих фрагментов кода</li>
					<li>"Горячая" замена модулей на странице</li>
				</ul>
			</section>
			<section>
				<h2>Минусы</h2>
				<ul>
					<li>Тяжел в освоении</li>
					<li>Плохая документация</li>
					<li>Вначале был ориентирован только на работу с JS-файлами</li>
				</ul>
			</section>
			<section>
				<h2>Среда окружения webpack</h2>
				<ul>
					<li>AMD & CommomJS</li>
					<li>Entry points</li>
					<li>Webpack dev server</li>
					<li>Hash</li>
					<li>Chunk</li>
				</ul>
			</section>
			<section>
				<section>
					<h2>Загрузчики и плагины</h2>
				</section>
				<section>
					<h3>Загрузчики</h3>
					<ul>
						<li>Преобразуют данные из одного формата в другой</li>
						<li>Могут добавлять в упаковку другие модули</li>
						<li>Как правило, делают одну трансформацию</li>
						<li>Работают только с одним модулем</li>
					</ul>
				</section>
				<section>
					<h3>Плагины</h3>
					<ul>
						<li>Имеют доступ ко всем модулям (до и после трансформации)</li>
						<li>Могут добавлять в упаковку свои модули (например, "runtime")</li>
						<li>Имеют доступ ко всем ресурсам, создаваемым после упаковки</li>
						<li>Применяются для изменения конфигурации сборки, оптимизации, горячего обновления ресурсов
						</li>
					</ul>
				</section>
			</section>
			<section>
				<h2>Начало работы</h2>
				<pre>
					<code class="hljs">
>npm install webpack -g

>npm install webpack --save-dev
					</code>
				</pre>
			</section>
			<section>
				<section>
					<h2>Простой пример</h2>
				</section>
				<section>
					<h3>Список файлов</h3>
					<pre>
						<code class="hljs">
├── index.html
├── index.js
├── home.js
├── package.json
└── webpack.config.js
						</code>
					</pre>
				</section>
				<section>
					<h3>webpack.config.js</h3>
					<pre>
						<code class="hljs">
module.exports ={
    entry: "./index.js",
    output: {
        path: __dirname + "/dist",
        filename: "bundle.js"
    }
}
						</code>
					</pre>
				</section>
				<section>
					<h3>Другие файлы</h3>
					<p>home.js</p>
					<pre>
						<code class="hljs" data-trim>
function logger(msg) {
    console.log('home.js: ' + msg);
}
exports.logger = logger;
						</code>
					</pre>
					<p>index.js</p>
					<pre>
						<code class="hljs" data-trim>
const home = require('./home.js');
home.logger('test message!');	
						</code>
					</pre>
					<p>index.html</p>
					<pre>
						<code class="hljs" data-trim>
&lt;!DOCTYPE&gt;
&lt;html&gt;
&lt;body&gt;
    &lt;script src="dist/bundle.js"&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;							
						</code>
					</pre>
				</section>
				<section>
					<h3>Выполнение</h3>
					<pre>
							<code class="hljs">
>webpack
Hash: ae054f410e21ea4e91af
Version: webpack 1.14.0
Time: 57ms
    Asset     Size  Chunks             Chunk Names
bundle.js  1.63 kB       0  [emitted]  main
   [0] ./index.js 69 bytes {0} [built]
   [1] ./home.js 90 bytes {0} [built]
							</code>
					</pre>
					<pre>
							<code class="hljs">
//index.html
home.js: test message!
							</code>
					</pre>
				</section>
				<section>
					<h3>bundle.js</h3>
					<pre>
						<code class="hljs" data-trim>
(function(modules) { 
 	var installedModules = {};
 	function __webpack_require__(moduleId) {
 		if(installedModules[moduleId])
 			return installedModules[moduleId].exports;
 		var module = installedModules[moduleId] = {
 			exports: {},id: moduleId,loaded: false
 		};
 		modules[moduleId].call(module.exports, module, module.exports);
 		module.loaded = true;
 		return module.exports;
 	}
 	return __webpack_require__(0);
 })
/*********************************************************************/
 ([
 // LIST OF MUDULES ***
 ]);	
						</code>
					</pre>
				</section>
				<section>
					<h3>Массив модулей</h3>
					<pre>
						<code class="hljs">
([
/* 0 */
/***/ function(module, exports, __webpack_require__) {
	const home = __webpack_require__(1);
	home.logger('test message!');
/***/ },
/* 1 */
/***/ function(module, exports) {
	function logger(msg) {
	    console.log('home.js: ' + msg);
	}
	exports.logger = logger;
/***/ }
 ]);
						</code>
					</pre>
				</section>
			</section>
			<section>
				<section>
					<h2>Внешний доступ к модулям</h2>
				</section>
				<section>
					<h3>webpack.config.js</h3>
					<pre>
						<code class="hljs">
module.exports ={
    entry: "./index.js",
    output: {
        path: __dirname + "/dist",
        filename: "bundle.js",
        library: 'webpack' //*
    }
}	
						</code>
					</pre>
				</section>
				<section>
					<h3>JS файлы</h3>
					<p>home.js</p>
					<pre>
						<code class="hljs">
function logger(msg) {
    console.log('home.js: ' + msg);
}

exports.logger = logger;
						</code>
					</pre>
					<p>index.js</p>
					<pre>
						<code class="hljs">
const home = require('./home.js');
home.logger('test message!');

exports.logger = home.logger; //*	
						</code>
					</pre>
				</section>
				<section>
					<h3>index.html</h3>
					<pre>
						<code class="hljs">
&lt;!DOCTYPE&gt;
&lt;html&gt;

&lt;body&gt;
    &lt;script src="dist/bundle.js"&gt;&lt;/script&gt;
    &lt;script&gt;
        webpack.logger('index.html');//*
    &lt;/script&gt;
&lt;/body&gt;

&lt;/html&gt;
						</code>
					</pre>
				</section>
				<section>
					<h3>Выполнение</h3>
					<pre>
						<code class="hljs">
>webpack
Hash: 8cb5e92b5543b1c3cd00
Version: webpack 1.14.0
Time: 65ms
    Asset     Size  Chunks             Chunk Names
bundle.js  1.68 kB       0  [emitted]  main
   [0] ./index.js 102 bytes {0} [built]
   [1] ./home.js 90 bytes {0} [built]
						</code>
					</pre>
					<pre>
						<code class="hljs">
home.js: test message!
home.js: index.html
						</code>
					</pre>
				</section>
				<section>
					<h3>Изменения в bundle.js</h3>
					<pre>
						<code class="hljs">
var webpack =  //*** добавилась внешняя переменная
 (function(modules) {
 	// The module cache
 	var installedModules = {};

 	// The require function
 	function __webpack_require__(moduleId) {

 		// Check if module is in cache
 		if(installedModules[moduleId])
 			return installedModules[moduleId].exports;
//...................................................

						</code>
					</pre>
				</section>
			</section>
			<section>
				<h2>Несколько точек входа</h2>
				<pre>
					<code class="hljs">
const webpack = require('webpack');

module.exports = {
    context: __dirname + '/src',
    entry: {
        index: './index/index',
        about: './about/about'
    },
    output: {
        path: 'dist',
        filename: "[name].js",
        library: '[name]'
    },
//.............................
}	
					</code>
				</pre>
			</section>
			<section>
				<section>
					<h2>Пересборка приложения при изменениях</h2>
				</section>
				<section>
					<h3>Свойство watch</h3>
					<blockquote>
						Опция позволяет автоматически пересобирать приложение, модули, файлы и запускать задачи при обнаружении изменений
					</blockquote>
					<pre>
						<code class="js">
module.exports ={
    entry: "./index.js",
    output: {
        path: __dirname + "/dist",
        filename: "bundle.js",
        library: 'webpack'
    },
    watch: true,
    watchOptions :{//не обязательные свойства
        aggregateTimeout: 300,
        ignored: './node_modules/',
        poll: 1000
    }
}	
						</code>
					</pre>
				</section>
				<section>
					<h3>watch options</h3>
					<ul>
						<li>aggregateTimeout (мс) - время задержки старта процесса пересобирания после обнаружения первого изменения</li>
						<li>ignored - игнорируемые файлы, можно использовать паттерн ('/files/*.js')</li>
						<li>poll (мс) - проверяет изменения через заданный промежуток времени</li>
					</ul>
				</section>
			</section>
			<section>
				<section>
					<h2>Отладка скриптов</h2>
				</section>
				<section>
					<h3>Проблема отладки</h3>
					<p>До</p>
					<img src="img/webpack-debugger-false.png" alt="">
					<p>После</p>
					<img src="img/webpack-debugger-true.png" alt="">
				</section>
				<section>
					<h3>devtool</h3>
					<img src="img/webpack-devtool.png" alt="">
				</section>
				<section>
					<h3>Краткое описание</h3>
					<small>
						<ul>
							<li>eval - каждый модуль выполняется с использованием eval и ссылки на карту кода</li>
							<li>source-map - генерируются отладочные карты кода (файл *.js.map)</li>
							<li>hidden-source-map - то же, что и source-map, но не добавляется ссылка в JS-файл</li>
							<li>inline-source-map - карта добавляется как sourceMappingURL в JS-файлы/li>
							<li>eval-source-map - каждый модуль выполняется с использованием eval, карта добавляется как sourceMappingURL в eval</li>
							<li>cheap-source-map - то же, что и source-map, но номера строк некорректные (номера строк модифицированных файлов вместо оригинальных). Карты кода, подгружаемые загрузчиком (для внешних модулей), не используются</li>
							<li>cheap-module-source-map - то же, что и source-map, но при сопоставлении данных корректные номера имеют только строки. Загружает карты кода для внешних модулей</li>
						</ul>
					</small>
				</section>
				<section>
					<h3>Пример</h3>
					<pre>
						<code class="hljs">
module.exports ={
    entry: "./index.js",
    output: {
        path: __dirname + "/dist",
        filename: "bundle.js",
        library: 'webpack'
    },
    watch: true,
    devtool: 'source-map'
}
						</code>
					</pre>
				</section>
			</section>
			<section>
				<section>
					<h2>Babel.js</h2>
				</section>
				<section>
					<h3>Установка</h3>
					<pre>
						<code class="hljs">
>npm install babel-loader babel-core babel-preset-es2015 
         babel-plugin-transform-runtime webpack --save-dev
// или
>npm install webpack --save-dev
>npm install babel-loader --save-dev
>npm install babel-core --save-dev
>npm install babel-plugin-transform-runtime --save-dev
>npm install babel-preset-es2015 --save-dev
						</code>
					</pre>
				</section>
				<section>
					<h3>Список файлов</h3>
					<pre>
						<code class="hljs">
├── index.html
├── index.js
├── home.js
├── package.json
└── webpack.config.js
						</code>
					</pre>
				</section>
				<section>
					<h3>webpack.config.js</h3>
					<pre>
						<code class="hljs" data-trim>
module.exports = {
    entry: "./index.js",
    output: {
        path: __dirname + "/dist",
        filename: "bundle.js",
        library: 'webpack'
    },
    devtool: 'source-map',
    module: {
        loaders: [{
            test: /\.js$/,
            exclude: /(node_modules|bower_components)/,
            loader: 'babel-loader',
            query: {
                presets: ['es2015']
            }
        }]
    }
}
						</code>
					</pre>
				</section>
				<section>
					<h3>JS файлы</h3>
					<p>home.js</p>
					<pre>
						<code class="hljs" data-trim>
function logger(msg) {
    console.log('home.js: ' + msg);
}

export {logger};
						</code>
					</pre>
					<p>index.js</p>
					<pre>
						<code class="hljs" data-trim>
import {logger} from './home.js';
logger('test message!');

export {logger};
						</code>
					</pre>
				</section>
				<section>
					<h3>index.html</h3>
					<p>index.html</p>
					<pre>
						<code class="hljs" data-trim>
&lt;!DOCTYPE&gt;
&lt;html&gt;

&lt;body&gt;
    &lt;script src="dist/bundle.js"&gt;&lt;/script&gt;
    &lt;script&gt;
        webpack.logger('index.html');
    &lt;/script&gt;
&lt;/body&gt;

&lt;/html&gt;						
						</code>
					</pre>
				</section>
				<section>
					<h3>Выполнение</h3>
					<pre>
							<code class="hljs">
>webpack
Hash: 85b7bbe08c21bd59f07e
Version: webpack 1.14.0
Time: 927ms
        Asset     Size  Chunks             Chunk Names
    bundle.js  1.94 kB       0  [emitted]  main
bundle.js.map  1.96 kB       0  [emitted]  main
    + 2 hidden modules
							</code>
					</pre>
					<pre>
							<code class="hljs">
//index.html
home.js: test message!
							</code>
					</pre>
				</section>
				<section>
					<h3>bundle.js (фрагмент)</h3>
					<pre>
						<code class="hljs">
/* 0 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	
	Object.defineProperty(exports, "__esModule", {
	  value: true
	});
	exports.logger = undefined;
	
	var _home = __webpack_require__(1);
	(0, _home.logger)('test message!');
	
	exports.logger = _home.logger;

/***/ },
/* 1 */
						</code>
					</pre>
				</section>
			</section>
			<section>
				<h2>uglifyJS</h2>
				<pre>
						<code class="hljs" data-trim>
const webpack = require('webpack');//*
module.exports = {
    entry: "./index.js",
    output: {
        path: __dirname + "/dist",
        filename: "bundle.js",
        library: 'webpack'
    },
    plugins: [
        new webpack.optimize.UglifyJsPlugin({
            compress: {
                warnings: false,
                drop_debugger: true,
                unsafe: false,
                drop_console: true
            },
            comments: false,
            beautify: true
    })]
}
						</code>
				</pre>
			</section>
			<section>
				<section>
					<h2>Обнаружение общих модулей</h2>
				</section>
				<section>
					<h3>Свойство chunkFilename</h3>
					<pre>
						<code class="hljs">
output: {
    path: 'dist/',
    filename: "[name]/[name].js",
    library: '[name]',
    chunkFilename: "[id].chunk.js"
}
						</code>
					</pre>
				</section>
				<section>
					<h3>Плагин CommonsChunkPlugin</h3>
					<pre>
						<code class="hljs">
plugins: [
    new webpack.optimize.CommonsChunkPlugin({
        name: "commons",
        filename: "[name].js"
    })
]
						</code>
					</pre>
				</section>
			</section>
			<section>
				<section>
					<h2>Работа со стилями</h2>
				</section>
				<section>
					<h3>Структура проекта</h3>
					<img src="img/webpack-style-structure.png" alt="">
				</section>
				<section>
					<h3>Установка зависимостей</h3>
					<pre>
						<code class="hljs">
npm install style-loader css-loader postcss-loader 
          postcss-smart-import --save-dev

или
npm install style-loader --save-dev
npm install css-loader --save-dev
npm install postcss-loader  --save-dev
npm install postcss-smart-import --save-dev
						</code>
					</pre>
				</section>
				<section>
					<h3>
						postcss.config.js
					</h3>
					<pre>
						<code class="hljs">
module.exports = {
  plugins: [
    require('postcss-smart-import')({ /* ...options */ }),
    require('autoprefixer')({ 
        cascade: false,
        browsers: ['last 2 versions', '> 1%']
     })
  ]
}
						</code>
					</pre>
				</section>
				<section>
					<h3>Изменения в webpack.config.js</h3>
					<pre>
						<code class="hljs" data-trim>
module.exports = {
    context: path.resolve(__dirname, 'src'),
//........................................................
    module: {
        loaders: [
            {
                test: /\.css$/,
                loaders: [
                    'style-loader',
                    'css-loader?importLoaders=1&sourceMap',
                    'postcss-loader'
                ]
            }
//........................................................
        ]
    }
}
						</code>
					</pre>
				</section>
				<section>
					<h3>Пример js-файла</h3>
					<pre>
						<code class="hljs">
import style from './index.css';
import logger from '../common/logger';

logger('about.js');

const build = (text) =>{

    let header = document.createElement('h1');
    header.className = 'header';
    header.innerHTML = text;

    document.body.insertBefore(header, document.body.firstChild);
}

export {build}

						</code>
					</pre>
				</section>
				<section>
					<h3>После выполнения....</h3>
					<pre>
						<code class="hljs">
/* 7 */
/***/ function(module, exports, __webpack_require__) {

	exports = module.exports = __webpack_require__(3)();
	// imports
	
	// module
	exports.push([module.id, 
		"body {\r\n  background-color: red;\r......,
		"sourcesContent":["body {\r\n  background-color:........."
	}]);
	
	// exports

/***/ }
/******/ ]);
//# sourceMappingURL=index.js.map
						</code>
					</pre>
				</section>
			</section>
			<section>
				<section>
					<h2>Работа с изображениями</h2>
				</section>
				<section>
					<h3>Установка зависимостей</h3>
					<pre>
						<code class="hljs">
>npm install file-loader --save-dev
>npm install image-webpack-loader --save-dev
						</code>
					</pre>
				</section>
				<section>
					<h3>Изменения в webpack.config.js</h3>
					<pre>
						<code class="hljs" data-trim>
module.exports = {
//........................................  
    module: {
        loaders: [
//........................................       
            {
                test: /\.(jpe?g|png|gif|svg)$/i,
                loaders: [
                    'file?name=[path][name].[ext]',
                    'image-webpack?bypassOnDebug&optimizationLevel=5'
                ]
            },
//........................................
        ]
    }
}
						</code>
					</pre>
				</section>
				<section>
					<h3>Пример файла стилей</h3>
					<pre>
						<code class="hljs">
							
.main {
    height: 100px;
    margin: 50px;
    border-radius: 5px;
    background-image: url('logo.png');
}
						</code>
					</pre>
				</section>
				<section>
					<h3>После выполнения</h3>
					<pre>
						<code class="hljs" data-trim>
/* 8 */
function(module, exports, __webpack_require__) {
    exports = module.exports = __webpack_require__(3)();
	
	// module
exports.push([module.id, "body {\r\n background-color: 
	red;\r\n}\r\n\r\n.main {\r\n height: 100px;\r\n    
	margin: 50px;\r\n    border-radius: 5px;\r\n    
	background-image: url(" + __webpack_require__(9) + ");
	\r\n}"]); //***
	
},
/* 9 */
function(module, exports, __webpack_require__) {
    module.exports = __webpack_require__.p + "index/logo.png";
},
						</code>
					</pre>
				</section>
			</section>
			<section>
				<section>
					<h2>Webpack Dev Server</h2>
				</section>
				<section>
					<h3>Установка</h3>
					<pre>
						<code class="hljs">
>npm install webpack-dev-server -g
>npm install webpack-dev-server
						</code>
					</pre>
				</section>
				<section>
					<h3>Изменения в webpack.config.js</h3>
					<pre>
						<code class="hljs" data-trim>
module.exports = {
    context: path.resolve(__dirname, 'src'),
    entry: {
        index: ['webpack-dev-server/client',
            'webpack/hot/only-dev-server',
            './index/index'
        ],
        about: ['webpack-dev-server/client',
            'webpack/hot/only-dev-server',
            './about/about'
        ]
    },
   //............................................
    devServer: {
        host: '127.0.0.1',
        port: 5000,
        contentBase: __dirname + '/dist',
        hot: true
    }
}
						</code>
					</pre>
				</section>
				<section>
					<h3>Выполнение</h3>
					<pre>
						<code class="hljs" data-trim>
>webpack-dev-server
http://127.0.0.1:5000/webpack-dev-server/
Hash: 4dbf5d282f7ba349b2db
Version: webpack 1.14.0
Time: 2512ms
             Asset       Size  Chunks             Chunk Names
  about/about.html  146 bytes          [emitted]
    index/logo.png    24.5 kB          [emitted]
  index/index.html  146 bytes          [emitted]
    about/about.js    13.5 kB       0  [emitted]  about
    index/index.js    13.8 kB       1  [emitted]  index
about/about.js.map    17.2 kB       0  [emitted]  about
index/index.js.map    17.6 kB       1  [emitted]  index
chunk    {0} about/about.js, about/about.js.map (about) 11.4 kB [rendered]
    [0] ./src/about/about.js 784 bytes {0} [built]
    [1] ./src/about/about.css 1.13 kB {0} [built]
//.......................................................................
						</code>
					</pre>
				</section>
			</section>
			<section>
				<h2>Большой пример</h2>
				<pre>
					<code class="hljs" data-trim>
const webpack = require('webpack'),
    path = require("path");

module.exports = {
    context: path.resolve(__dirname, 'src'),
    entry: {
        index: ['webpack-dev-server/client',
            'webpack/hot/only-dev-server',
            './index/index'
        ],
        about: ['webpack-dev-server/client',
            'webpack/hot/only-dev-server',
            './about/about'
        ]
    },
    output: {
        path: 'dist/',
        filename: "[name]/[name].js",
        library: '[name]',
        chunkFilename: "[id].chunk.js"
    },
    watch: true,
    watchOptions: {
        aggregateTimeout: 300,
        ignored: './node_modules/',
        poll: 1000
    },
    devtool: 'source-map',
    plugins: [
        new webpack.optimize.UglifyJsPlugin({
            compress: {
                warnings: false,
                drop_debugger: false,
                unsafe: false,
                drop_console: false
            },
            comments: false,
            beautify: true
        }),
        new webpack.optimize.CommonsChunkPlugin({
            name: "commons",
            filename: "[name].js"
        })
    ],
    module: {
        loaders: [{
                test: /\.js$/,
                exclude: /(node_modules|bower_components)/,
                loader: 'babel-loader',
                query: {
                    presets: ['es2015'],
                    plugins: ['transform-runtime']
                }
            },
            {
                test: /\.css$/,
                loaders: [
                    'style-loader',
                    'css-loader?importLoaders=1&sourceMap',
                    'postcss-loader'
                ]
            },
            {
                test: /\.(jpe?g|png|gif|svg)$/i,
                loaders: [
                    'file?name=[path][name].[ext]?[hash]',
                    'image-webpack?bypassOnDebug&optimizationLevel=5'
                ]
            },
            {
                test: /\.html$/,
                loader: 'file?name=[path][name].[ext]'
            }
        ]
    },
    devServer: {
        host: '127.0.0.1',
        port: 5000,
        contentBase: __dirname + '/dist',
        hot: true
    }
}
					</code>
				</pre>
			</section>
			<section>
				<section>
					<h2>Gulp и Webpack</h2>
				</section>
				<section>
					<h3>Пример 1</h3>
					<pre>
						<code class="hljs">
const gulp = require('gulp'),
      webpack = require('webpack-stream');

gulp.task('default', function() {
  return gulp.src('src/entry.js')
    .pipe(webpack( require('./webpack.config.js') ))
    .pipe(gulp.dest('dist/'));
});
						</code>
					</pre>
				</section>
				<section>
					<h3>Пример 2</h3>
					<pre>
						<code class="hljs" data-trim>
const gulp = require('gulp'),
      webpack = require('webpack-stream');

gulp.task('default', function() {
  return gulp.src('src/entry.js')
    .pipe(webpack({
      entry: {
        app: 'src/app.js',
        test: 'test/test.js',
      },
      output: {
        filename: '[name].js',
      },
    }))
    .pipe(gulp.dest('dist/'));
});
						</code>
					</pre>
				</section>
			</section>
			<section>
				<h2 class="header-hide">Спасибо за внимание</h2>
				<img src="img/thanks.png" alt="" height="600">
			</section>
		</div>
	</div>
	<aside id="presentable-icon" class="revealjs">
		<a title="Содержание лекции" href="#/0/1">
			<i class="fa fa-list-ul fa-2x"></i>
		</a>
	</aside>
	<script src="../../js/bundle.min.js"></script>
</body>

</html>